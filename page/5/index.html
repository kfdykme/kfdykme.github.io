<!DOCTYPE html>


<html lang="zh-CN" >


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     枋
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">枋</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-myblog/Spring2vue-my-code-life-3-about-java" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/10/myblog/Spring2vue-my-code-life-3-about-java/"
    >Spring2vue-my-code-life-3-about-java</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/10/myblog/Spring2vue-my-code-life-3-about-java/" class="article-date">
  <time datetime="2020-03-09T16:06:12.000Z" itemprop="datePublished">2020-03-10</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="从Spring-到Vue-3-关于Java"><a href="#从Spring-到Vue-3-关于Java" class="headerlink" title="从Spring 到Vue 3 关于Java"></a>从Spring 到Vue 3 关于Java</h1><p>有什么事Java经常会被问到但是我一直记不住的呢.</p>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>Java的基础类型？</p>
<p>int long short byte char boolean double float</p>
<p>声明基础类型的时候发生了什么？</p>
<p>例如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">int</span> a;</span><br><span class="line">  <span class="comment">//在栈中分配了空间给a</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">//在栈中分配了空间给b同时在常量区中查找变量0，如果有则栈中b指向该值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="String-类型"><a href="#String-类型" class="headerlink" title="String 类型"></a>String 类型</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> String c = <span class="string">"c"</span>;</span><br><span class="line">  <span class="keyword">public</span> String d = <span class="string">"das"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String e  = c + d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h3><h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><h4 id="transient"><a href="#transient" class="headerlink" title="transient"></a>transient</h4><p>可序列化的对象中不需要进行序列化的变量</p>
<h4 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h4><p>每次写的的时候从内存读取</p>
<h4 id="atomic"><a href="#atomic" class="headerlink" title="atomic"></a>atomic</h4><p>####</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="Java-链表"><a href="#Java-链表" class="headerlink" title="Java 链表"></a>Java 链表</h3><h3 id="Java-List"><a href="#Java-List" class="headerlink" title="Java List"></a>Java List</h3><ul>
<li>ArrayList<ul>
<li>数组</li>
</ul>
</li>
<li>Vector<ul>
<li>数组</li>
<li>线程安全</li>
</ul>
</li>
<li>LinkedList<ul>
<li>链表</li>
<li></li>
</ul>
</li>
</ul>
<p>数组实现： 查找快，增删慢<br>链表实现： 查找慢，增删快</p>
<h3 id="Java-HashSet"><a href="#Java-HashSet" class="headerlink" title="Java HashSet"></a>Java HashSet</h3><ul>
<li>存<ul>
<li>调用hashCode，计算存储位置<ul>
<li>进行equals比较<ul>
<li>没用元素/比较结果为false则存</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Java-Collection"><a href="#Java-Collection" class="headerlink" title="Java Collection"></a>Java Collection</h3><h3 id="Java-HashMap"><a href="#Java-HashMap" class="headerlink" title="Java HashMap"></a>Java HashMap</h3><h4 id="hash冲突"><a href="#hash冲突" class="headerlink" title="hash冲突"></a>hash冲突</h4><p>拉链法解决</p>
<p>初始容量，加载因子</p>
<p>线程不安全,</p>
<h4 id="hashtable"><a href="#hashtable" class="headerlink" title="hashtable"></a>hashtable</h4><p>线程安全</p>
<p>散列表</p>
<p>key value不能为空</p>
<p>支持Enumeration</p>
<h4 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a>ConcurrentHashMap</h4><p>线程安全版HashMap</p>
<p>增加了segment层，每次针对单个segment加锁</p>
<h4 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h4><ul>
<li>LinkedHashMap是继承于HashMap，是基于HashMap和双向链表来实现的。</li>
<li>HashMap无序；LinkedHashMap有序，可分为插入顺序和访问顺序两种。如果是访问顺序，那put和get操作已存在的Entry时，都会把Entry移动到双向链表的表尾(其实是先删除再插入)。</li>
<li>LinkedHashMap存取数据，还是跟HashMap一样使用的Entry[]的方式，双向链表只是为了保证顺序。</li>
<li>LinkedHashMap是线程不安全的</li>
</ul>
<p><a href="https://www.jianshu.com/p/8f4f58b4b8ab" target="_blank" rel="noopener">我看的这里</a></p>
<h4 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a>TreeMap</h4><p>基于红黑树的NavigableMap，线程非安全，不允许null，存入需要实现comparable接口或实现comparator接口排序</p>
<h2 id="JVM相关"><a href="#JVM相关" class="headerlink" title="JVM相关"></a>JVM相关</h2><p>jvm运行时数据区</p>
<ul>
<li>方法区 method area</li>
<li>虚拟机栈 VM stack</li>
<li>本地方法栈 native method stack</li>
<li>堆 heap</li>
<li>程序计数器 program counter register</li>
</ul>
<p>###程序计数器</p>
<ul>
<li>java 方法<ul>
<li>正在执行的虚拟机字节码的地址</li>
</ul>
</li>
<li>本地方法<ul>
<li>undefined</li>
</ul>
</li>
</ul>
<h3 id="java-虚拟机栈"><a href="#java-虚拟机栈" class="headerlink" title="java 虚拟机栈"></a>java 虚拟机栈</h3><ul>
<li>线程私有</li>
<li>java方法执行的内存模型。</li>
<li>每个方法在执行时都会创建一个栈帧 Stack Frame<ul>
<li>局部变量表<ul>
<li>编译器可知的各种基本类型（boolean， int，long， short， byte， double， float， char）</li>
<li>对象引用类型（refrence）</li>
<li>returnAddress类型</li>
</ul>
</li>
<li>操作数栈</li>
<li>动态链接</li>
<li>方法出口</li>
</ul>
</li>
</ul>
<h3 id="本地方法栈"><a href="#本地方法栈" class="headerlink" title="本地方法栈"></a>本地方法栈</h3><h3 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h3><ul>
<li>线程共享</li>
</ul>
<h3 id="方法区"><a href="#方法区" class="headerlink" title="方法区"></a>方法区</h3><ul>
<li>共享内存</li>
<li>包含<ul>
<li>已被虚拟机加载的类信息</li>
<li>常量</li>
<li>静态变量</li>
<li>即时编译器编译后的代码等数据</li>
</ul>
</li>
<li>运行时常量池<ul>
<li>存放编译期间生成的各种字面量和符号引用。</li>
<li>内存有限</li>
</ul>
</li>
</ul>
<h3 id="直接内存"><a href="#直接内存" class="headerlink" title="直接内存"></a>直接内存</h3><p>不知道</p>
<h2 id="HotSpot"><a href="#HotSpot" class="headerlink" title="HotSpot"></a>HotSpot</h2><p>后续再研究吧</p>
<h3 id="对象的创建"><a href="#对象的创建" class="headerlink" title="对象的创建"></a>对象的创建</h3><h3 id="对象的布局"><a href="#对象的布局" class="headerlink" title="对象的布局"></a>对象的布局</h3><p>###对象的访问定位</p>
<h3 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h3><h2 id="Java-反射"><a href="#Java-反射" class="headerlink" title="Java 反射"></a>Java 反射</h2><h2 id="Java-类加载"><a href="#Java-类加载" class="headerlink" title="Java 类加载"></a>Java 类加载</h2><p>双亲</p>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span> <span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).start()</span><br><span class="line"></span><br><span class="line"><span class="comment">//run的话只是正常运行，不会启动新线程</span></span><br><span class="line"><span class="comment">//如何验证？</span></span><br></pre></td></tr></table></figure>

<h3 id="Callable"><a href="#Callable" class="headerlink" title="Callable"></a>Callable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callable</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function">V <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Future</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">cancel</span><span class="params">(<span class="keyword">boolean</span> mayInterruptIfRunning)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">isCancelled</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">isDone</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">V <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">V <span class="title">get</span><span class="params">(<span class="keyword">long</span> timeout, TimeUnit unit)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException, TimeoutException</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RunnableFuture</span>&lt;<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">Runnable</span>, <span class="title">Future</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FutureTask</span>&lt;<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">RunnableFuture</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">(Runnable command)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ExecutorService</span> <span class="keyword">extends</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function">List&lt;Runnable&gt; <span class="title">shutdownNow</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">boolean</span> <span class="title">isShutdown</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">boolean</span> <span class="title">isTerminated</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">   &lt;T&gt; <span class="function">Future&lt;T&gt; <span class="title">submit</span><span class="params">(Callable&lt;T&gt; task)</span></span>;</span><br><span class="line">   &lt;T&gt; <span class="function">Future&lt;T&gt; <span class="title">submit</span><span class="params">(Runnable task, T result)</span></span>;</span><br><span class="line">   Future&lt;?&gt; submit(Runnable task);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Executors</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newCachedThreadPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">0</span>, Integer.MAX_VALUE, <span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                            <span class="keyword">new</span> SynchronousQueue&lt;Runnable&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="四种线程池"><a href="#四种线程池" class="headerlink" title="四种线程池"></a>四种线程池</h4><ul>
<li>newCachedThreadPool<ul>
<li>如无线程则新建。</li>
<li>一定时间无使用则销毁</li>
</ul>
</li>
<li>newSingleThreadExecutor<ul>
<li>维持一个线程</li>
</ul>
</li>
<li>newFixedThreadPool<ul>
<li>最大值前一个任务一个线程</li>
</ul>
</li>
<li>newScheduledThreadPool<ul>
<li>大小无限</li>
</ul>
</li>
</ul>
<p>线程异常则再加一新的线程</p>
<h4 id="关闭方法"><a href="#关闭方法" class="headerlink" title="关闭方法"></a>关闭方法</h4><ul>
<li>shutdown<ul>
<li>不接受新任务，任务结束后停止</li>
</ul>
</li>
<li>shutdownNow<ul>
<li>尝试停止，返回未执行任务</li>
</ul>
</li>
</ul>
<h3 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h3><ul>
<li>同步方法</li>
<li>同步代码块</li>
<li>volatile</li>
<li>重入锁<ul>
<li>ReentrantLock()</li>
</ul>
</li>
<li>ThreadLocal</li>
<li>LinkedBlockingQueue</li>
<li>原子变量</li>
</ul>
<h3 id="equals"><a href="#equals" class="headerlink" title="equals"></a>equals</h3><p>先判断类型，在判断值。可重写</p>
<h3 id="hashCode"><a href="#hashCode" class="headerlink" title="hashCode"></a>hashCode</h3><p>返回</p>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/code/" rel="tag">code</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-myblog/Spring2vue-my-code-life-2" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/09/myblog/Spring2vue-my-code-life-2/"
    >Spring2vue-my-code-life-2</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/09/myblog/Spring2vue-my-code-life-2/" class="article-date">
  <time datetime="2020-03-09T15:45:43.000Z" itemprop="datePublished">2020-03-09</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="从Spring-到Vue-2-Spring-IOC-amp-AOP"><a href="#从Spring-到Vue-2-Spring-IOC-amp-AOP" class="headerlink" title="从Spring 到Vue 2 Spring IOC&amp;AOP"></a>从Spring 到Vue 2 Spring IOC&amp;AOP</h1><ul>
<li>控制反转 IoC (Inversion of controll)</li>
<li>切面编程 AOP Aspect Oriented Programming<ul>
<li>Java 代理<ul>
<li>动态代理</li>
<li>静态代理</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><p>IOC，Inversion of Controll ,控制反转。我一直无法理解这东西到底是什么，为什么起这么一个反人类的名字。</p>
<p><a href="https://www.cnblogs.com/jonky/p/10154767.html" target="_blank" rel="noopener">java简单例子介绍IOC和AOP</a></p>
<h3 id="DI-Dependency-Inject-依赖注入"><a href="#DI-Dependency-Inject-依赖注入" class="headerlink" title="DI Dependency  Inject 依赖注入"></a>DI Dependency  Inject 依赖注入</h3><p><a href="https://blog.csdn.net/liunianqingshi/article/details/78144489" target="_blank" rel="noopener">依赖注入和控制反转的理解，写的太好了。</a></p>
<h3 id="DL-Dependency-Lookup-依赖查找"><a href="#DL-Dependency-Lookup-依赖查找" class="headerlink" title="DL Dependency  Lookup 依赖查找"></a>DL Dependency  Lookup 依赖查找</h3><ul>
<li>依赖拖拽</li>
<li>上下文查找</li>
</ul>
<h2 id="AOP-切面编程"><a href="#AOP-切面编程" class="headerlink" title="AOP 切面编程"></a>AOP 切面编程</h2><p>切面编程的简单意思大概就是，把代码切成3层。中间的夹心层是原先的逻辑代码，前后的饼干层是由AOP方式实现的通用逻辑代码。</p>
<h5 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AbcService</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doing</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbcServiceImpl</span> <span class="keyword">implements</span> <span class="title">AbcService</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">'doing'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbcServiceProxy</span> <span class="title">implments</span> <span class="title">AbcService</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> AbcService abcService;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">AbcServiceProxy</span> <span class="params">(AbcService service)</span> </span>&#123;</span><br><span class="line">    abcService = service;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"doing start"</span>)</span><br><span class="line">    abcService.doing()</span><br><span class="line">    System.out.println(<span class="string">"doing end"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h5><p>动态代理的实现方式就是通过</p>
<p>Proxy.newProxyInstance方法，将需要代理的类,方法，以及参数传递到对应的 InvocationHandler内，然后在调用方法的前后增加想要的逻辑代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbsServiceDynamicProxy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title">AbcService</span> <span class="params">(AbcServiceImpl serviceImpl)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Proxy.newProxyInstance(serviceImpl<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span></span><br><span class="line"><span class="class">    ,<span class="title">logger</span>.<span class="title">getClass</span>().<span class="title">getInterfaces</span>()</span></span><br><span class="line"><span class="class">    , <span class="title">new</span> <span class="title">InvocationHandler</span>() </span>&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">               System.out.println(<span class="string">"before proxy"</span>);</span><br><span class="line">               method.invoke(serviceImpl,args);</span><br><span class="line">               System.out.println(<span class="string">"after proxy"</span>)</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="相关"><a href="#相关" class="headerlink" title="相关"></a>相关</h6><ul>
<li><a href="/2019/04/15/android/retrofit/RetrofitFrist/">Retrofit 动态代理</a></li>
<li>Spring的动态代理，后续看源码的时候再做分析</li>
</ul>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/code/" rel="tag">code</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-myblog/Spring2vue-my-code-life" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/08/myblog/Spring2vue-my-code-life/"
    >Spring2vue-my code lift</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/08/myblog/Spring2vue-my-code-life/" class="article-date">
  <time datetime="2020-03-08T08:57:57.000Z" itemprop="datePublished">2020-03-08</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="从Spring-到Vue-（一）-Spring"><a href="#从Spring-到Vue-（一）-Spring" class="headerlink" title="从Spring 到Vue （一） Spring"></a>从Spring 到Vue （一） Spring</h1><p>从去年六月份开始使用Spring+Vue开发前后端，那么原理是什么呢？我还不知道，这是我对自身知识结构的梳理。</p>
<h2 id="Spring-是什么东西"><a href="#Spring-是什么东西" class="headerlink" title="Spring 是什么东西"></a>Spring 是什么东西</h2><p><em>Spring</em> 是一个后端框架，它用于开发后端。和他平级的还有 <em>ktor</em> ，<em>express</em>等。</p>
<p>当然<em>Spring</em>远不止此，但是从一个非java后端人士的角度来说，暂时就这样把。</p>
<h2 id="使用Spring进行开发与使用原生Java的区别"><a href="#使用Spring进行开发与使用原生Java的区别" class="headerlink" title="使用Spring进行开发与使用原生Java的区别"></a>使用Spring进行开发与使用原生Java的区别</h2><p>我为什么需要使用<em>Spring</em>呢，假如我需要实现一个http服务。我为什么不使用原生的java api帮助我实现一个简单的http服务器呢？</p>
<h3 id="HTTP服务器"><a href="#HTTP服务器" class="headerlink" title="HTTP服务器"></a>HTTP服务器</h3><p>由此，让我先梳理一下http服务器做了什么事情。</p>
<ul>
<li>响应网络请求，返回api接口内容</li>
<li>响应网络请求，返回html资源</li>
<li>与mysql等进行通信。</li>
<li>从服务器端进行请求，获取内网数据</li>
</ul>
<h3 id="Java-Api-实现HTTP服务器"><a href="#Java-Api-实现HTTP服务器" class="headerlink" title="Java Api 实现HTTP服务器"></a>Java Api 实现HTTP服务器</h3><p>使用 com.sun.net.httpserver 包进行相关操作。我本身没有尝试过进行这样的操作，因为以往实现简单HTTP服务时我更倾向于使用express等node相关的技术栈，因为他们更<em>快</em>。</p>
<p>总而言之，通过官方给予我们的com.sun.net.httpserver包，我们可以简单得实现一个REST API，但是关于：</p>
<ul>
<li>认证</li>
<li>xxxx我没想好得内容，使用Spring会更加方便。</li>
</ul>
<h3 id="Spring-帮我们做了什么呢"><a href="#Spring-帮我们做了什么呢" class="headerlink" title="Spring 帮我们做了什么呢"></a>Spring 帮我们做了什么呢</h3><p>现如今我想要使用spring搭建一个http服务器</p>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/code/" rel="tag">code</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-draft" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/08/draft/"
    >draft</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/08/draft/" class="article-date">
  <time datetime="2020-03-08T08:38:18.000Z" itemprop="datePublished">2020-03-08</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      
      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-android/retrofit/RetrofitFrist" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/15/android/retrofit/RetrofitFrist/"
    >Retrofit 源码 part 1</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/04/15/android/retrofit/RetrofitFrist/" class="article-date">
  <time datetime="2019-04-15T15:37:00.000Z" itemprop="datePublished">2019-04-15</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="Retrofit-源码-part-1"><a href="#Retrofit-源码-part-1" class="headerlink" title="Retrofit 源码 part 1"></a>Retrofit 源码 part 1</h1><p>Retrofit 大致上就是动态代理+注释处理</p>
<h2 id="简单来说"><a href="#简单来说" class="headerlink" title="简单来说"></a>简单来说</h2><p>如果我们要进行一个像这样的网络请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GitHubService service = retrofit.create(GitHubService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">Call&lt;List&lt;Repo&gt;&gt; repos = service.listRepos(<span class="string">"octocat"</span>);</span><br></pre></td></tr></table></figure>
<p>摘自<a href="https://square.github.io/retrofit/" target="_blank" rel="noopener">retrofit</a></p>
<p>其内部的过程是这样的</p>
<ul>
<li><p>retrofit.create()</p>
<ul>
<li>Proxy.newProxyInstance  创建一个java动态代理<ul>
<li>loadServiceMethod() 调用这个方法<ul>
<li>parseAnnotations  对GithubService.class内的注释进行处理<ul>
<li>RequestFactory.parseAnnotations (处理注释)</li>
<li>HttpServiceMethod.parseAnnotations （与Okhttp关联)</li>
</ul>
</li>
</ul>
</li>
<li>loadServiceMethod().invoke = HttpServiceMethod.invoke 方法调用时会对应调用</li>
</ul>
</li>
</ul>
</li>
<li><p>service.listRepos == Proxy.InvocationHandler.invoke</p>
</li>
</ul>
<p>下面看看具体内容.</p>
<h2 id="create"><a href="#create" class="headerlink" title="create()"></a>create()</h2><p>Retrofit 的源码我们从Retrofit.create这个方法开始看</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">create</span><span class="params">(<span class="keyword">final</span> Class&lt;T&gt; service)</span> </span>&#123;</span><br><span class="line">    Utils.validateServiceInterface(service);</span><br><span class="line">    <span class="keyword">if</span> (validateEagerly) &#123;</span><br><span class="line">      eagerlyValidateMethods(service);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (T) Proxy.newProxyInstance(service.getClassLoader(), <span class="keyword">new</span> Class&lt;?&gt;[] &#123; service &#125;,</span><br><span class="line">        <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">          <span class="keyword">private</span> <span class="keyword">final</span> Platform platform = Platform.get();</span><br><span class="line">          <span class="keyword">private</span> <span class="keyword">final</span> Object[] emptyArgs = <span class="keyword">new</span> Object[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">          <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, @Nullable Object[] args)</span></span></span><br><span class="line"><span class="function">              <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">            <span class="comment">// If the method is a method from Object then defer to normal invocation.</span></span><br><span class="line">            <span class="keyword">if</span> (method.getDeclaringClass() == Object<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">              <span class="keyword">return</span> method.invoke(<span class="keyword">this</span>, args);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (platform.isDefaultMethod(method)) &#123;</span><br><span class="line">              <span class="keyword">return</span> platform.invokeDefaultMethod(method, service, proxy, args);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> loadServiceMethod(method).invoke(args != <span class="keyword">null</span> ? args : emptyArgs);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>在craete()中，先对参数final Class<T> service做一个校验，是否是一个interface,是否有继承自其他interface之类的。</p>
<p>这一部分的核心是返回了一个 <code>Proxy.newProxyInstance(...)</code> , 使用Java 动态代理。同时动态代理的 InvocationHandler 的 invoke()方法的实现与service的注释相关.</p>
<p>我们看到这一部分</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> loadServiceMethod(method).invoke(args != <span class="keyword">null</span> ? args : emptyArgs);</span><br></pre></td></tr></table></figure>

<h2 id="loadServiceMethod"><a href="#loadServiceMethod" class="headerlink" title="loadServiceMethod"></a>loadServiceMethod</h2><p>每次执行代理的方法的时候，执行loadServiceMethod.invoke, 所以就是说 Retrofit.create()返回的结果由动态代理帮助实现。那么怎么样把service的方法调用之后就实现网络请求呢？这就由注释实现了。<br>loadserviceMethod的相关代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ServiceMethod&lt;?&gt; loadServiceMethod(Method method) &#123;</span><br><span class="line">    ServiceMethod&lt;?&gt; result = serviceMethodCache.get(method);</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="keyword">null</span>) <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">synchronized</span> (serviceMethodCache) &#123;</span><br><span class="line">      result = serviceMethodCache.get(method);</span><br><span class="line">      <span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line">        result = ServiceMethod.parseAnnotations(<span class="keyword">this</span>, method);</span><br><span class="line">        serviceMethodCache.put(method, result);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>这里面我们需要关注的是</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resuslt = ServiceMethod.parseAnnotations(<span class="keyword">this</span>, method);</span><br></pre></td></tr></table></figure>
<h2 id="parseAnnotations"><a href="#parseAnnotations" class="headerlink" title="parseAnnotations"></a>parseAnnotations</h2><p>很明显这个是对注释进行处理，那么我们需要关注parseAnnotations()做了怎么样的处理.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceMethod</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> &lt;T&gt; <span class="function">ServiceMethod&lt;T&gt; <span class="title">parseAnnotations</span><span class="params">(Retrofit retrofit, Method method)</span> </span>&#123;</span><br><span class="line">    RequestFactory requestFactory = RequestFactory.parseAnnotations(retrofit, method);</span><br><span class="line"></span><br><span class="line">    Type returnType = method.getGenericReturnType();</span><br><span class="line">    <span class="keyword">if</span> (Utils.hasUnresolvableType(returnType)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> methodError(method,</span><br><span class="line">          <span class="string">"Method return type must not include a type variable or wildcard: %s"</span>, returnType);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (returnType == <span class="keyword">void</span><span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">throw</span> methodError(method, <span class="string">"Service methods cannot return void."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpServiceMethod.parseAnnotations(retrofit, method, requestFactory);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">abstract</span> T <span class="title">invoke</span><span class="params">(Object[] args)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ServiceMethod的源码很短，简单看来, ServiceMethod.parseAnnotations(…) 完成了两件事</p>
<ul>
<li>从 retrofit, method 中取得了RequestFactory类的示例retrofitFactory</li>
<li>将 retrofitFactory作为参数交由 HttpServiceMethod处理.</li>
</ul>
<h3 id="RequestFactory-parseAnnotations-retrofit-method"><a href="#RequestFactory-parseAnnotations-retrofit-method" class="headerlink" title="RequestFactory.parseAnnotations(retrofit, method)"></a>RequestFactory.parseAnnotations(retrofit, method)</h3><p>这里是真正的对parseAnnotation  进行处理，为什么这么说呢，read the fucking code.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestFactory</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> RequestFactory <span class="title">parseAnnotations</span><span class="params">(Retrofit retrofit, Method method)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Builder(retrofit, method).build();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  RequestFactory(Builder builder) &#123;</span><br><span class="line">    method = builder.method;</span><br><span class="line">    baseUrl = builder.retrofit.baseUrl;</span><br><span class="line">    httpMethod = builder.httpMethod;</span><br><span class="line">    relativeUrl = builder.relativeUrl;</span><br><span class="line">    headers = builder.headers;</span><br><span class="line">    contentType = builder.contentType;</span><br><span class="line">    hasBody = builder.hasBody;</span><br><span class="line">    isFormEncoded = builder.isFormEncoded;</span><br><span class="line">    isMultipart = builder.isMultipart;</span><br><span class="line">    parameterHandlers = builder.parameterHandlers;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    Builder(Retrofit retrofit, Method method) &#123;</span><br><span class="line">      <span class="keyword">this</span>.retrofit = retrofit;</span><br><span class="line">      <span class="keyword">this</span>.method = method;</span><br><span class="line">      <span class="keyword">this</span>.methodAnnotations = method.getAnnotations();</span><br><span class="line">      <span class="keyword">this</span>.parameterTypes = method.getGenericParameterTypes();</span><br><span class="line">      <span class="keyword">this</span>.parameterAnnotationsArray = method.getParameterAnnotations();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">RequestFactory <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (Annotation annotation : methodAnnotations) &#123;</span><br><span class="line">        parseMethodAnnotation(annotation);</span><br><span class="line">      &#125;</span><br><span class="line">      ...</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> RequestFactory(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">parseMethodAnnotation</span><span class="params">(Annotation annotation)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> DELETE) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">"DELETE"</span>, ((DELETE) annotation).value(), <span class="keyword">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> GET) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">"GET"</span>, ((GET) annotation).value(), <span class="keyword">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> HEAD) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">"HEAD"</span>, ((HEAD) annotation).value(), <span class="keyword">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> PATCH) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">"PATCH"</span>, ((PATCH) annotation).value(), <span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> POST) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">"POST"</span>, ((POST) annotation).value(), <span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> PUT) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">"PUT"</span>, ((PUT) annotation).value(), <span class="keyword">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> OPTIONS) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">"OPTIONS"</span>, ((OPTIONS) annotation).value(), <span class="keyword">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> HTTP) &#123;</span><br><span class="line">        HTTP http = (HTTP) annotation;</span><br><span class="line">        parseHttpMethodAndPath(http.method(), http.path(), http.hasBody());</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> retrofit2.http.Headers) &#123;</span><br><span class="line">        String[] headersToParse = ((retrofit2.http.Headers) annotation).value();</span><br><span class="line">        <span class="keyword">if</span> (headersToParse.length == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">throw</span> methodError(method, <span class="string">"@Headers annotation is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        headers = parseHeaders(headersToParse);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> Multipart) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFormEncoded) &#123;</span><br><span class="line">          <span class="keyword">throw</span> methodError(method, <span class="string">"Only one encoding annotation is allowed."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        isMultipart = <span class="keyword">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> FormUrlEncoded) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isMultipart) &#123;</span><br><span class="line">          <span class="keyword">throw</span> methodError(method, <span class="string">"Only one encoding annotation is allowed."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        isFormEncoded = <span class="keyword">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="HttpServiceMethod"><a href="#HttpServiceMethod" class="headerlink" title="HttpServiceMethod"></a>HttpServiceMethod</h3><p>再 HttpServiceMethod.parseAnnotations中 再次将retrofit ,method进行处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServiceMethod</span>&lt;<span class="title">ResponseT</span>, <span class="title">ReturnT</span>&gt; <span class="keyword">extends</span> <span class="title">ServiceMethod</span>&lt;<span class="title">ReturnT</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span> &lt;ResponseT, ReturnT&gt; <span class="function">HttpServiceMethod&lt;ResponseT, ReturnT&gt; <span class="title">parseAnnotations</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">      Retrofit retrofit, Method method, RequestFactory requestFactory)</span> </span>&#123;</span><br><span class="line">    CallAdapter&lt;ResponseT, ReturnT&gt; callAdapter = createCallAdapter(retrofit, method);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    Converter&lt;ResponseBody, ResponseT&gt; responseConverter =</span><br><span class="line">        createResponseConverter(retrofit, method, responseType);</span><br><span class="line"></span><br><span class="line">    okhttp3.Call.Factory callFactory = retrofit.callFactory;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> HttpServiceMethod&lt;&gt;(requestFactory, callFactory, callAdapter, responseConverter);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从这里开始 retrofit 和method转化为<br>requestFactory callFactory callAdapter responseConverter作为参数构建 HttpServiceMethod实例。<br>所以我们需要去查看HttpServiceMethod是来干什么的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServiceMethod</span>&lt;<span class="title">ResponseT</span>, <span class="title">ReturnT</span>&gt; <span class="keyword">extends</span> <span class="title">ServiceMethod</span>&lt;<span class="title">ReturnT</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">HttpServiceMethod</span><span class="params">(RequestFactory requestFactory, okhttp3.Call.Factory callFactory,</span></span></span><br><span class="line"><span class="function"><span class="params">      CallAdapter&lt;ResponseT, ReturnT&gt; callAdapter,</span></span></span><br><span class="line"><span class="function"><span class="params">      Converter&lt;ResponseBody, ResponseT&gt; responseConverter)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.requestFactory = requestFactory;</span><br><span class="line">    <span class="keyword">this</span>.callFactory = callFactory;</span><br><span class="line">    <span class="keyword">this</span>.callAdapter = callAdapter;</span><br><span class="line">    <span class="keyword">this</span>.responseConverter = responseConverter;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span> <span class="function">ReturnT <span class="title">invoke</span><span class="params">(Object[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> callAdapter.adapt(</span><br><span class="line">        <span class="keyword">new</span> OkHttpCall&lt;&gt;(requestFactory, args, callFactory, responseConverter));</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看出，当 service里面的方法被执行的时候，是由callAdapter.adapt()处理一个OkHttoCall完成的。<br>到此为止，retrofit与okhttp之间的联系也就找到了.</p>
<p>我对动态代理也不熟悉,暂时到此为止,。</p>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/" rel="tag">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/retrofit/" rel="tag">retrofit</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-android/source/AppCompatActivity" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/02/19/android/source/AppCompatActivity/"
    >Android AppCompatActivity</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/02/19/android/source/AppCompatActivity/" class="article-date">
  <time datetime="2019-02-19T07:54:52.000Z" itemprop="datePublished">2019-02-19</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="Android-AppCompatActivity"><a href="#Android-AppCompatActivity" class="headerlink" title="Android AppCompatActivity"></a>Android AppCompatActivity</h1><h2 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h2><ul>
<li>extends FragmentActivity</li>
<li>implements AppCompatCallback, SupportParentable, DelegateProvider</li>
</ul>
<h2 id="与Activity-比较"><a href="#与Activity-比较" class="headerlink" title="与Activity 比较"></a>与Activity 比较</h2><h3 id="setContentView"><a href="#setContentView" class="headerlink" title="setContentView"></a>setContentView</h3><p>AppCompatActivity的setContentView ,调用this.getDelegate().setContentView(…)<br>而Acitivity的setContentView调用this.getWindow().setContentView(…)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppCompatActivity</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContentView</span><span class="params">(View view, LayoutParams params)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.getDelegate().setContentView(view, params);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContentView</span><span class="params">(@LayoutRes <span class="keyword">int</span> layoutResID)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.getDelegate().setContentView(layoutResID);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Activity</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContentView</span><span class="params">(@LayoutRes <span class="keyword">int</span> layoutResID)</span> </span>&#123;</span><br><span class="line">  getWindow().setContentView(layoutResID);</span><br><span class="line">  initWindowDecorActionBar();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AppCompatActivity的setContentView调用的时候会调用一个this.getDelegate()</p>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/" rel="tag">android</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-quickapp/Environment" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/12/21/quickapp/Environment/"
    >quickapp 踩坑记（一） 入门坑与为什么踩这个坑</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/12/21/quickapp/Environment/" class="article-date">
  <time datetime="2018-12-20T16:59:32.000Z" itemprop="datePublished">2018-12-21</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="quickapp-踩坑记-一-入门坑与为什么踩这个坑"><a href="#quickapp-踩坑记-一-入门坑与为什么踩这个坑" class="headerlink" title="quickapp 踩坑记 (一) 入门坑与为什么踩这个坑"></a>quickapp 踩坑记 (一) 入门坑与为什么踩这个坑</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>主要讲了</p>
<ul>
<li>ubuntu + atom 搭建快应用开发环境</li>
<li>调试相关<ul>
<li>无法通过wifi调试以及可能原因</li>
<li>由于调试导致的上传失败</li>
</ul>
</li>
<li>通过 adb 调试快应用</li>
<li>闲话：为何入坑</li>
</ul>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h3><p>我的ubuntu是 18.04,当然这并不重要，应该说我的系统是ubuntu。环境配置就是很正常的安装一些东西就好了。</p>
<p>目前快应用有3个IDE，一个官方的IDE和华为的两个版本的IDE,看上去都是基于VSCODE的，另外他们都没有linux的版本…</p>
<p>官方好像也有推荐使用:</p>
<ul>
<li>sublxxx(一看我名字都记不住就知道我不喜欢用这个）</li>
<li>vscode (安装快应用对应的插件)</li>
<li>webstorm(好像没有免费版，我就没用了，尊重一下JetBrains)</li>
</ul>
<p>首先 install <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">node</a></p>
<p>然后 install <a href="https://atom.io" target="_blank" rel="noopener">atom</a></p>
<h4 id="配置一下文本编辑工具"><a href="#配置一下文本编辑工具" class="headerlink" title="配置一下文本编辑工具"></a>配置一下文本编辑工具</h4><p>打开 atom</p>
<p>–&gt; 菜单栏 Edit</p>
<p>–&gt; 选择 Preferences (window下<em>可能</em>是File-&gt;Settings)</p>
<p>–&gt; 点击按钮 Open Config Folder</p>
<p>–&gt; 打开文件 config.cson</p>
<p>配置对ux文件的语法高亮</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"*":</span><br><span class="line">  core:</span><br><span class="line">    customFileTypes:</span><br><span class="line">      "text.html.basic": [</span><br><span class="line">        <span class="string">"ux"</span></span><br><span class="line">      ]</span><br></pre></td></tr></table></figure>

<p>然后随意弄一下UI theme 和 Syntax theme</p>
<p>我的配置完之后是这样子的<br><img src="/images/quickapp_environment_1.png" alt=""></p>
<p>然后就算很正常的npm install -g hap-toolkit</p>
<blockquote>
<p>可以选择装一个emmet插件辅助自动补全</p>
</blockquote>
<p>走起～</p>
<h3 id="关于调试"><a href="#关于调试" class="headerlink" title="关于调试"></a>关于调试</h3><h4 id="无法在线更新"><a href="#无法在线更新" class="headerlink" title="无法在线更新"></a>无法在线更新</h4><p>一开始的时候遇到过无法在线安装的问题，后来发现不止是快应用，其他用wifi调试的类似开发方式有时也会遇到。这里的其他开发方式指的是 Ionic 的 Ionic DevApp和React Native的Expo。这两者也是在手机上运行了一个’容器’，方便实现热加载，利用chrome dev tool进行调试等。</p>
<p>言归正传，快应用调试的时候运行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run server</span><br></pre></td></tr></table></figure>
<p>会生成一堆东西:</p>
<p><img src="/images/quickapp_environment_2.png" alt=""></p>
<p>这里生成ip地址不一定是对应的本机的地址(当然我图中的是正确的)。如果电脑上装了虚拟机/docker/其他容器，这里的服务器地址<strong>有可能</strong>会是虚拟机的网卡的ip,同时二维码对应的也是虚拟机的ip，这样扫码是<strong>不能在线更新</strong>的（因为连不上)</p>
<p>如果扫玛一直扫不出来的话，可以考虑换一个命令行终端。比如我之前用Win10的cmd.exe的时候就不像一个二维码(顺手安利一波<em>cmder</em>)。</p>
<p>当然直接手动输入地址也是ok的。</p>
<blockquote>
<p>在这里顺带感谢一下在我遇到这个问题时群里通过ip地址看出是虚拟机ip的那个大哥</p>
</blockquote>
<p> ps:这个问题在官方支持usb调试之后就与我绝缘了。</p>
<h4 id="无法上传"><a href="#无法上传" class="headerlink" title="无法上传"></a>无法上传</h4><p>在调用快应用的系统能力之网络之上传时，有可能会发生这样的错误</p>
<p><img src="/images/quickapp_environment_3.png" alt=""></p>
<p>代码是这样子的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@system.request'</span> <span class="comment">//正常的导入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 正常的使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">request.upload(&#123;</span><br><span class="line">  url : <span class="string">"http://"</span>,</span><br><span class="line">  files : o.files,</span><br><span class="line">  data : o.data,</span><br><span class="line">  method:<span class="string">"POST"</span>,</span><br><span class="line">  success : onSuccess,</span><br><span class="line">  fail: onFetchFail</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这通常是发生在开了调试工具的时候，一边进行调试一边上传就会报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">发生了错误: 1000</span><br><span class="line">Stream Closed</span><br></pre></td></tr></table></figure>
<h5 id="处理方法："><a href="#处理方法：" class="headerlink" title="处理方法："></a>处理方法：</h5><p>这时候只需要拔掉你的usb线,再次上传，一切ok。</p>
<p>其实就是退出调试模式，单纯运行快应用。</p>
<p>如果想要查看上传过程中的log的话可以使用adb。</p>
<h3 id="adb-调试快应用"><a href="#adb-调试快应用" class="headerlink" title="adb 调试快应用"></a>adb 调试快应用</h3><p>鉴于快应用开发的应该是前端的同学，可能不太了解adb是什么<br>adb = Android Debug Bridge ,android开发可能会用得比较多一点。</p>
<p>一般想要配置adb的话，下载一个android sdk tool就好了(把整个androidt stuido下载下来也是可以的)，然后配置环境变量,<br>一般adb是在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ANDROID_SDK_HOME&#x2F;platform-tools&#x2F;</span><br></pre></td></tr></table></figure>
<p>这个目录下。</p>
<p>有时候不想打开chrome-dev-tool，只想在命令行查看log,就可以使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.info(<span class="string">'你的log'</span>)</span><br><span class="line"><span class="comment">// 好像需要console.info()才可以</span></span><br><span class="line"><span class="comment">// console.log()的日志不能被下面的命令抓取</span></span><br><span class="line"><span class="comment">//（记得不清+不想做实验了)</span></span><br></pre></td></tr></table></figure>
<p>然后在命令行输入:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat | grep JsConsole</span><br></pre></td></tr></table></figure>

<p>adb logcat 是读取手机运行的日志，快应用运行的日志自然也包含在里面。</p>
<p>然后使用 grep JsConsole 进行筛选。之所以用<em>JsConsole</em>，是因为我目测得出快应用引擎(无论是官方的快应用预览器还是厂商自己的快应用引擎) 都是这个tag。</p>
<p>windows同学没有grep命令的话……可以使用windows上支持bash的终端工具。</p>
<blockquote>
<p>最近在ubutn上 adb 有时会与 npm run server 冲突，需要关掉其中一个（或者会自动帮你关到其中一个)</p>
</blockquote>
<h3 id="一些闲-fei4-话"><a href="#一些闲-fei4-话" class="headerlink" title="一些闲(fei4)话"></a>一些闲(fei4)话</h3><p>比起前端开发，我更加熟悉的可能是android端的开发。虽然也大概清楚前端开发是怎么一回事，但是完完整整地用标记语言+js+css开发一个东西的经验并不是很多。所以如有错漏的，不专业的地方(后续会很多)请轻喷。写这篇东西一是为了征文大赛，二是为了顺带梳理一番开发过程中遇到的问题。</p>
<p>同时最近忙成狗的我也没时间看别人的征文，如果有些内容已经有人指出了，如有巧合纯属雷同，啦啦啦啦啦啦。</p>
<p>在年初的时候学长让了解一下快应用和flutter，然后被flutter的语法劝退之后尝试写起了快应用。想着当时微信小程序封测的时候也对小程序浅尝辄止了一番（学校的小团体搞了比赛，赚了个androd高级进阶和鼠标让我甚是高兴，难以忘怀，特此讨打），但是那时候由于种种原因一直在AIDE上写app，也就没机会没能力继续接触。</p>
<p>而去年学校微信小程序比赛搞起来，发现小程序的IDE和开发流程都变了很多。（2333，无意义感慨）</p>
<p>刚好快应用出来，想着有机会从初期接触一个框架，然后了解这个东西是怎么一步步完善起来的，于是决定踩坑。</p>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/quickapp/" rel="tag">quickapp</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-interview/mianshi" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/11/24/interview/mianshi/"
    >Android 面试经历吧，称不上经验</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/11/24/interview/mianshi/" class="article-date">
  <time datetime="2018-11-23T20:15:00.000Z" itemprop="datePublished">2018-11-24</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h2 id="小米一面"><a href="#小米一面" class="headerlink" title="小米一面"></a>小米一面</h2><ul>
<li>自我介绍</li>
<li>算法<ul>
<li>整形重复数组找出出现奇数次的数字</li>
<li>（（））字符串匹配</li>
<li>二叉树从右看</li>
</ul>
</li>
<li>java<ul>
<li>权限关键字</li>
<li>进程与线程</li>
</ul>
</li>
<li>Android<ul>
<li>anr 情况，处理</li>
<li>线程，进程</li>
<li>app一般有几个进程</li>
<li>常用了解的讲一下</li>
<li>网络请求</li>
</ul>
</li>
</ul>
<p>iso7层</p>
<p>5层</p>
<p>网络掩码</p>
<h2 id="小米二面"><a href="#小米二面" class="headerlink" title="小米二面"></a>小米二面</h2><ul>
<li>自我介绍</li>
<li>数据库<ul>
<li>触发器</li>
<li>事务</li>
</ul>
</li>
<li>realm 线程安全吗</li>
<li>事件分发机制</li>
<li>单链表反转</li>
<li>内存回收机制</li>
<li>kotlin 好处</li>
<li>kotlin 不需要findviewbyid原理</li>
<li>Android 源码看过吗</li>
<li>布局<ul>
<li>LinearLayout</li>
<li>RelativeLayout</li>
</ul>
</li>
<li>强引用 弱引用</li>
<li>java 内存泄露，处理</li>
<li>handler</li>
<li>启动模式</li>
<li>为什么listview要改成recyclerview</li>
<li>mvp与mvc区别</li>
<li>java怎么new 一个子类</li>
<li>快应用怎么弄mvp</li>
</ul>
<p>-</p>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/" rel="tag">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/interview/" rel="tag">interview</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-android/Context" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/11/20/android/Context/"
    >Android Context相关</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/11/20/android/Context/" class="article-date">
  <time datetime="2018-11-20T03:52:00.000Z" itemprop="datePublished">2018-11-20</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="Android-Context-相关"><a href="#Android-Context-相关" class="headerlink" title="Android Context 相关"></a>Android Context 相关</h1><p>Context 基本上就是Activity + Service + Application</p>
<blockquote>
<p>Class Overview<br>Interface to global information about an application environment. This is an abstract class whose implementation is provided by the Android system. It allows access to application-specific resources and classes, as well as up-calls for application-level operations such as launching activities, broadcasting and receiving intents, etc.</p>
</blockquote>
<p>Context是用于访问应用资源，类同时也进行application层的操作：启动activity广播以及接收广播</p>
<p>api文档上关于</p>
<p>再看看Context相关的子类.因为Context的父类就直接是java.lang.Object了。</p>
<p>Context的子类有</p>
<ul>
<li>ContextWrapper</li>
<li>MockContext</li>
</ul>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
    <article id="post-java/NavigableMap" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/11/19/java/NavigableMap/"
    >Java Interface NavigableMap&lt;K,V&gt;</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/11/19/java/NavigableMap/" class="article-date">
  <time datetime="2018-11-19T00:28:00.000Z" itemprop="datePublished">2018-11-19</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="Java-Interface-NavigableMap"><a href="#Java-Interface-NavigableMap" class="headerlink" title="Java Interface NavigableMap"></a>Java Interface NavigableMap</h1><ul>
<li>Map.Entry&lt;K,V&gt; lowerEntry(K key)</li>
<li>K lowerKey(K key);</li>
<li>Map.Entry&lt;K,V&gt; floorEntry(K key);</li>
<li>K floorKey(K key);</li>
<li>ceilingEntry</li>
<li>ceilingKey</li>
<li>higherEntry</li>
<li>higherKey</li>
<li>firstEntry</li>
<li>lastEntry</li>
<li>pollFirstEntry</li>
<li>pollLastEntry</li>
<li>NavigableMap&lt;K,V&gt; descendingMap();</li>
<li>NavigableSet<K> navigableKeySet();</li>
<li>NavigableSet<K> descendingKeySet();</li>
<li>NavigableMap&lt;K,V&gt; subMap(K fromKey, boolean fromInclusive,K toKey, boolean toInclusive);</li>
<li>NavigableMap&lt;K,V&gt; headMap(K toKey,boolean inclusive);</li>
<li>NavigableMap&lt;K,V&gt; tailMap(K fromKey, boolean inclusive);</li>
<li>SortedMap&lt;K,V&gt; subMap(K fromKey, K toKey);</li>
<li>SortedMap&lt;K,V&gt; headMap(K toKey);</li>
<li>SortedMao&lt;K,V&gt; tailMap(K fromKey);</li>
</ul>

      
      <!-- reward -->
      
    </div>
    

      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/6/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020
        Kfdykme
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/logo.jpg" alt="枋"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['嘤嘤嘤', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
      startDelay: 0,
      typeSpeed: 200,
      loop: true,
      backSpeed: 100,
      showCursor: true
    });
  } catch (err) {
  }

</script>





<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>



<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>





<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>


    
  </div>
</body>

</html>